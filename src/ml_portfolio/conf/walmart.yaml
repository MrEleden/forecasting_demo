# ==============================================================================
# Walmart Sales Forecasting Configuration
# ==============================================================================
#
# Dataset: M5 Competition Walmart sales data
# Task: Forecast weekly sales for multiple stores/departments
# Primary Metric: WMAE (competition metric) or MAPE for optimization
#
# Usage:
#   # Normal training
#   python src/ml_portfolio/training/train.py --config-name walmart
#   python src/ml_portfolio/training/train.py --config-name walmart model=xgboost
#
#   # Model comparison (grid search)
#   python src/ml_portfolio/training/train.py --config-name walmart -m model=lightgbm,xgboost
#
#   # Hyperparameter optimization (auto-loads sweep/{model}_search_space.yaml)
#   python src/ml_portfolio/training/train.py --config-name walmart use_optuna=true --multirun
#   python src/ml_portfolio/training/train.py --config-name walmart model=xgboost use_optuna=true --multirun
#
#   # Multi-model optimization (auto-loads each model's search space)
#   python src/ml_portfolio/training/train.py --config-name walmart use_optuna=true -m model=lightgbm,xgboost,catboost
#
# ==============================================================================

defaults:
  - config  # Inherit base configuration
  - override dataset_factory: walmart
  - override feature_engineering: walmart_full
  - override model: lightgbm  # Best performer from benchmarks
  - _self_

# ==============================================================================
# EXPERIMENT SETTINGS
# ==============================================================================

# Experiment identification
experiment_name: walmart_sales_forecasting
dataset_name: walmart
run_name: null  # Auto-generated (format: {model}_{timestamp})

# Random seed for reproducibility
seed: 42

# ==============================================================================
# LOGGING CONFIGURATION
# ==============================================================================

log_level: INFO
verbose: true

# ==============================================================================
# TRACKING AND OPTIMIZATION
# ==============================================================================

# MLflow experiment tracking (enabled for Walmart project)
use_mlflow: true

# Optuna hyperparameter optimization (disabled by default)
use_optuna: false
primary_metric: MAPE  # Optimize validation MAPE
minimize: true

# ==============================================================================
# MODEL PERSISTENCE
# ==============================================================================

# Checkpointing
save_checkpoints: true
checkpoint_dir: null  # Auto-generated in outputs/walmart/

# ==============================================================================
# TRAINING SETTINGS
# ==============================================================================

# Early stopping (for iterative models like LightGBM, XGBoost)
early_stopping_patience: 10
early_stopping_min_delta: 0.001

# Validation frequency
validate_every_n_epochs: 1

# ==============================================================================
# HYDRA CONFIGURATION
# ==============================================================================

hydra:
  run:
    dir: outputs/walmart/${now:%Y-%m-%d}/${now:%H-%M-%S}
  sweep:
    dir: outputs/walmart/multirun/${now:%Y-%m-%d}/${now:%H-%M-%S}
    subdir: ${hydra.job.num}
